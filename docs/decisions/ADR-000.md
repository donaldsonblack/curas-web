# ADR-000: Initial Technology Stack Selection

**Date**: 2025-09-20

**Status**: Accepted

## Context

This is the inaugural project for the Curas Medical CMMS MVP. The primary goal is to deliver a production-grade PWA for a 30-day pilot in a single hospital ward. The technology choices must support rapid development, offline-first functionality, security, and compliance, while laying a foundation for future scalability.

The choices outlined here are mandated by the project brief and serve as the authoritative technical guardrails for the MVP.

## Decision

We will adopt the following technology stack:

*   **Frontend**: React TypeScript PWA, built with Vite. 
    *   **UI**: `shadcn/ui` and Tailwind CSS for a modern, accessible component library.
    *   **Data Fetching & State**: TanStack Query for server state management and caching.
    *   **Routing**: React Router for client-side navigation.
    *   **Validation**: Zod for runtime data validation.
    *   **Offline Storage**: Dexie.js (a wrapper for IndexedDB) for robust client-side storage.
    *   **Service Worker**: Workbox for PWA features, including offline caching and background sync.
    *   **QR Scanning**: `@zxing/browser` for camera-based QR code reading.

*   **Backend**: Java 21 (Temurin LTS) with the Spring Boot 3.x framework.
    *   **API Specification**: OpenAPI 3.1, following a contract-first approach.
    *   **Persistence**: JPA/Hibernate for the write model, with Flyway for database migrations.
    *   **Database**: PostgreSQL (via AWS RDS).
    *   **Authentication**: AWS Cognito for user management and JWT-based API authentication.
    *   **File Storage**: AWS S3 for attachments, using presigned URLs for secure uploads.
    *   **Async Jobs**: AWS SQS stubs for future background processing needs.

*   **Infrastructure & Hosting**:
    *   **Cloud Provider**: AWS (ap-southeast-2 region).
    *   **Compute**: AWS Fargate (ECS) for the backend API container.
    *   **Static Hosting**: AWS S3 and CloudFront for the PWA.
    *   **Database**: AWS RDS for PostgreSQL.
    *   **Security**: AWS WAF and AWS Secrets Manager.
    *   **IaC**: Terraform for provisioning and managing all cloud resources.

*   **Observability**: OpenTelemetry SDK for metrics and traces, shipping to AWS CloudWatch.

*   **CI/CD**: GitHub Actions for build, test, and deployment workflows.

## Consequences

*   **Benefits**:
    *   This stack is modern, well-supported, and aligns with industry best practices for building scalable web applications.
    *   The separation of frontend and backend concerns allows for parallel development.
    *   PWA-first approach provides a near-native experience on mobile without the overhead of separate app store builds.
    *   Leveraging managed AWS services (RDS, Cognito, Fargate) reduces operational overhead for the MVP.
    *   Contract-first API development with OpenAPI ensures clear integration points between frontend and backend.

*   **Risks/Trade-offs**:
    *   The team must have expertise across both the TypeScript/React and Java/Spring ecosystems.
    *   Reliance on AWS services creates vendor lock-in, which is an acceptable trade-off for the speed required for an MVP.
    *   Offline-first functionality adds complexity to state management and data synchronization, requiring rigorous testing.
